<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
<title>Wing Chun – Plateau 1536×1160</title>
<style>
  html,body{margin:0;height:100%;background:#0b0a0a;color:#eee;font-family:system-ui,Segoe UI,Roboto,Arial}
  /* Conteneur centré, TAILLE FIXE demandée */
  #frame{
    position:fixed; inset:0; display:grid; place-items:center; overflow:auto;
  }
  .stageWrap{
    width:1536px; height:1160px; position:relative;
    outline:1px solid #000; background:#000;
  }
  canvas{
    position:absolute; inset:0;
    width:1536px; height:1160px;           /* même taille CSS = pas de zoom */
    image-rendering:pixelated; image-rendering:crisp-edges;
  }
  /* Juste pour voir où cliquer plus tard, rien de fancy */
  #board{position:absolute; left:50%; bottom:24px; transform:translateX(-50%); display:flex; gap:12px}
  .btn{background:#222;border:1px solid #444;color:#ddd;padding:10px 16px;border-radius:10px}
</style>
</head>
<body>
<div id="frame">
  <div class="stageWrap">
    <canvas id="cx" width="1536" height="1160"></canvas>

    <!-- on garde 4 boutons pour tester si besoin, mais pas obligatoire ici -->
    <div id="board">
      <button class="btn">Pak Sao</button>
      <button class="btn">Tan Sao</button>
      <button class="btn">Bon Sao</button>
      <button class="btn">Punch</button>
    </div>
  </div>
</div>

<script>
/* ====== Images ====== */
/* CIEL SANS ZOOM: on dessine 1:1 sur un canvas 1536×1160 */
const SKY = new Image();
SKY.src = 'https://i.imgur.com/bLV8zWf.png';

/* Placeholders actuels perso/mannequin (tu as déjà les liens finaux, on branchera après) */
const FIGHTER = new Image(); FIGHTER.src = 'https://i.imgur.com/AweXMem.png';   // Pak par défaut
const DUMMY   = new Image(); DUMMY.src   = 'https://i.imgur.com/6ZKmReD.png';   // état neutre

/* ====== Canvas ====== */
const cx = document.getElementById('cx');
const ctx = cx.getContext('2d', { alpha:true });
ctx.imageSmoothingEnabled = false;

/* ====== Placement : TAILLES RÉDUITES (en pixels, pas en %) ====== */
/* Tu veux plus petit encore ? baisse ces nombres. */
const layout = {
  sky:   { x:0, y:0 },                     // taille native = canvas, pas de zoom
  fighter: { w: 220, x: 520, bottom: 90 }, // AVANT: ~300+, maintenant réduit à 220 px de large
  dummy:   { w: 200, x: 760, bottom: 86 }  // idem, réduit
};
/* Astuce: bottom = marge en pixels depuis le bas de l’écran (ancrage au sol). */

function drawSky(){
  if (!SKY.complete) return;
  // Pas de zoom, l'image fait 1536×1160 comme le canvas → dessin brut
  ctx.drawImage(SKY, 0, 0);
}

function drawSprite(img, w, x, bottom){
  if (!img.complete || !img.naturalWidth) return;
  const s = w / img.naturalWidth;
  const h = img.naturalHeight * s;
  const y = cx.height - h - bottom;
  ctx.drawImage(img, x, y, w, h);
}

function render(){
  ctx.clearRect(0,0,cx.width,cx.height);
  drawSky();                                                      // couche 1 (fixe, 1:1)
  drawSprite(DUMMY, layout.dummy.w, layout.dummy.x, layout.dummy.bottom);     // couche 2 (derrière)
  drawSprite(FIGHTER, layout.fighter.w, layout.fighter.x, layout.fighter.bottom); // couche 3 (devant)
  requestAnimationFrame(render);
}
render();

/* Juste au cas où on charge lentement */
[SKY,FIGHTER,DUMMY].forEach(img=>img.addEventListener('load', ()=>{}));
</script>
</body>
</html>
